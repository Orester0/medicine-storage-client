<div *ngIf="audit" class="modal fade show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content border-0 shadow">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Audit Details</h5>
        <button type="button" class="btn-close btn-close-white" (click)="closeDetails()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <strong>ID:</strong> {{ audit.id || 'N/A' }}
          </li>
          <li class="list-group-item">
            <strong>Planned By:</strong> 
            {{ audit.plannedByUser ? (audit.plannedByUser.lastName + ' ' + audit.plannedByUser.firstName) : 'N/A' }}
          </li>
          <li class="list-group-item">
            <strong>Closed By:</strong> 
            {{ audit.closedByUser ? (audit.closedByUser.lastName + ' ' + audit.closedByUser.firstName) : 'N/A' }}
          </li>
          <li class="list-group-item">
            <strong>Planned Date:</strong> 
            {{ audit.plannedDate ? (audit.plannedDate | date: 'dd.MM.yyyy') : 'N/A' }}
          </li>
          <li class="list-group-item">
            <strong>Start Date:</strong> 
            {{ audit.startDate ? (audit.startDate | date: 'dd.MM.yyyy') : 'N/A' }}
          </li>
          <li class="list-group-item">
            <strong>End Date:</strong> 
            {{ audit.endDate ? (audit.endDate | date: 'dd.MM.yyyy') : 'N/A' }}
          </li>
          <li class="list-group-item">
            <strong>Status:</strong>
            <span class="badge px-3 py-2 {{ getAuditStatusBadgeClass(audit.status) }}">
              {{ getAuditStatusText(audit.status) || 'N/A' }}
            </span>
          </li>
          <li class="list-group-item">
            <strong>Audit Items:</strong>
            <ul>
              <li *ngFor="let item of audit.auditItems" class="list-group-item">
                <strong>Medicine:</strong> {{ item.medicine.name || 'N/A' }}<br />
                <strong>Expected Quantity:</strong> {{ item.expectedQuantity || 'N/A' }}<br />
                <strong>Actual Quantity:</strong> {{ item.actualQuantity || 'N/A' }}<br />
                <strong>Checked By:</strong> 
                {{ item.checkedByUser ? (item.checkedByUser.lastName + ' ' + item.checkedByUser.firstName) : 'N/A' }}
              </li>
            </ul>
          </li>
          <li class="list-group-item">
            <strong>Notes:</strong>
            <ul>
              <li *ngFor="let note of audit.notes" class="list-group-item">
                <strong>{{ note.createdAt | date: 'dd.MM.yyyy HH:mm' }}:</strong> {{ note.note }}
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="modal-footer justify-content-between">
        <button class="btn btn-secondary" (click)="closeDetails()">Close</button>
      </div>
    </div>
  </div>
</div>
